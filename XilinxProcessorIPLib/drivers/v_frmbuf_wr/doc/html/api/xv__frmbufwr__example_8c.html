<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>v_frmbuf_wr: xv_frmbufwr_example.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="HTML_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xlogo_bg.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">v_frmbuf_wr
   </div>
   <div id="projectbrief">Vitis Drivers API Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="globals.html"><span>APIs</span></a></li>
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('xv__frmbufwr__example_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">xv_frmbufwr_example.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<div class="textblock"><p>This file demonstrates the example usage of Frame Buffer Read/Write IP available in catalogue. </p>
<p>Please refer v_frmbuf_wr example design guide for details on HW setup.</p>
<pre>
MODIFICATION HISTORY:</pre><pre>Ver   Who    Date     Changes
</p>
<hr/>
<p>
1.00  vyc   04/05/17   Initial Release
2.00  vyc   10/04/17   Add second buffer pointer for semi-planar formats
                       Add new memory formats BGRX8 and UYVY8
3.00  vyc   04/04/18   Add support for ZCU102, ZCU104, ZCU106
                       Add new memory format BGR8
4.00  pv    11/10/18   Added flushing feature support in driver.
                 flush bit should be set and held (until reset) by
                 software to flush pending transactions.IP is expecting
                 a hard reset, when flushing is done.(There is a flush
                 status bit and is asserted when the flush is done).
4.10  vv    02/05/19   Added new pixel formats with 12 and 16 bpc.
4.50  kp    12/07/21   Added new 3 planar video format Y_U_V8
4.60  kp    12/03/21   Added new 3 planar video format Y_U_V10
</pre> </div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a51ea266cc4109ecd144c970bb16dc53b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xv__frmbufwr__example_8c.html#a51ea266cc4109ecd144c970bb16dc53b">XVMonitor_IsVideoLocked</a>(GpioPtr)&#160;&#160;&#160;(XGpio_DiscreteRead(GpioPtr, 1))</td></tr>
<tr class="memdesc:a51ea266cc4109ecd144c970bb16dc53b"><td class="mdescLeft">&#160;</td><td class="mdescRight">These macros read GPIO to check video lock and overflow status.  <a href="#a51ea266cc4109ecd144c970bb16dc53b">More...</a><br/></td></tr>
<tr class="separator:a51ea266cc4109ecd144c970bb16dc53b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1404ec37649e5775142431036025c57a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xv__frmbufwr__example_8c.html#a1404ec37649e5775142431036025c57a">resetIp</a> (void)</td></tr>
<tr class="memdesc:a1404ec37649e5775142431036025c57a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the HLS (High-Level Synthesis) IP core and stops the frame buffer write operation.  <a href="#a1404ec37649e5775142431036025c57a">More...</a><br/></td></tr>
<tr class="separator:a1404ec37649e5775142431036025c57a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a753a60297e59f4f58705e5b94f51e1fd"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xv__frmbufwr__example_8c.html#a753a60297e59f4f58705e5b94f51e1fd">XVFrameBufferRdCallback</a> (void *data)</td></tr>
<tr class="memdesc:a753a60297e59f4f58705e5b94f51e1fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for Frame Buffer Read interrupt.  <a href="#a753a60297e59f4f58705e5b94f51e1fd">More...</a><br/></td></tr>
<tr class="separator:a753a60297e59f4f58705e5b94f51e1fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93fa7cae040aad5d80e3f895d64631ce"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xv__frmbufwr__example_8c.html#a93fa7cae040aad5d80e3f895d64631ce">XVFrameBufferWrCallback</a> (void *data)</td></tr>
<tr class="memdesc:a93fa7cae040aad5d80e3f895d64631ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for Frame Buffer Write interrupt.  <a href="#a93fa7cae040aad5d80e3f895d64631ce">More...</a><br/></td></tr>
<tr class="separator:a93fa7cae040aad5d80e3f895d64631ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xv__frmbufwr__example_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main application entry point for the Frame Buffer Example Design Test.  <a href="#a840291bc02cba5474a4cb46a9b9566fe">More...</a><br/></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a51ea266cc4109ecd144c970bb16dc53b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XVMonitor_IsVideoLocked</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">GpioPtr</td><td>)</td>
          <td>&#160;&#160;&#160;(XGpio_DiscreteRead(GpioPtr, 1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>These macros read GPIO to check video lock and overflow status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">GpioPtr</td><td>is pointer to the gpio Instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>T/F </dd></dl>

<p>Referenced by <a class="el" href="xv__frmbufwr__example_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main application entry point for the Frame Buffer Example Design Test. </p>
<p>This function initializes the platform, configures hardware drivers (VTC, frame buffers, GPIO), sets up interrupts, and iterates through all supported video formats and test video modes. For each valid combination, it configures the VTC and frame buffer, checks for video lock and overflow, and tracks pass/fail results. At the end, it prints a summary of the test results.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, 1 on failure. </dd></dl>

<p>References <a class="el" href="struct_x_v__frmbufwr___config.html#a2d873c1229a4efdfb3b132febf4e6054">XV_frmbufwr_Config::AXIMMDataWidth</a>, <a class="el" href="struct_x_v__frmbufwr.html#ac6a008e283f98889377df951199c4a5b">XV_frmbufwr::Config</a>, <a class="el" href="struct_x_v___frmbuf_wr__l2.html#a82fac99cfaebc558120fd4b5060fc146">XV_FrmbufWr_l2::FrmbufWr</a>, <a class="el" href="platform_8c.html#afddcfa5cf23f52259c9da7f926a4af57">init_platform()</a>, <a class="el" href="struct_x_v__frmbufwr___config.html#a55eb9329a50385463b2ffee562d7a412">XV_frmbufwr_Config::MaxDataWidth</a>, <a class="el" href="struct_x_v__frmbufwr___config.html#a067ead64f4f249d893081d4626bdb7a1">XV_frmbufwr_Config::PixPerClk</a>, <a class="el" href="xv__frmbufwr__example_8c.html#a1404ec37649e5775142431036025c57a">resetIp()</a>, <a class="el" href="xv__frmbufwr__example_8c.html#a753a60297e59f4f58705e5b94f51e1fd">XVFrameBufferRdCallback()</a>, <a class="el" href="xv__frmbufwr__example_8c.html#a93fa7cae040aad5d80e3f895d64631ce">XVFrameBufferWrCallback()</a>, <a class="el" href="group__v__frmbuf__wr.html#ggaf6ba82d79d84ccc4ee6b505eb629c045a3cc801c2a0990cf5bde03a385fd993d0">XVFRMBUFWR_HANDLER_DONE</a>, <a class="el" href="group__v__frmbuf__wr.html#gaaef29cb5e2485c63e589f6f0621eac9d">XVFrmbufWr_SetCallback()</a>, and <a class="el" href="xv__frmbufwr__example_8c.html#a51ea266cc4109ecd144c970bb16dc53b">XVMonitor_IsVideoLocked</a>.</p>

</div>
</div>
<a class="anchor" id="a1404ec37649e5775142431036025c57a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resetIp </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the HLS (High-Level Synthesis) IP core and stops the frame buffer write operation. </p>
<p>This function performs the following steps:</p>
<ol type="1">
<li>Stops the frame buffer write core and waits for it to become idle.</li>
<li>Prints a message indicating that the HLS IP is being reset.</li>
<li>Asserts the reset line for the HLS IP by writing 0 to the reset GPIO.</li>
<li>Waits for 1 millisecond to ensure the reset is asserted.</li>
<li>Deasserts the reset line by writing 1 to the reset GPIO.</li>
<li>Waits for another millisecond to allow the IP to come out of reset.</li>
</ol>
<p>This ensures a proper reset sequence for the HLS IP and the frame buffer write core. </p>

<p>References <a class="el" href="group__v__frmbuf__wr.html#ga0cfe9c77cc5534a27e613e5fc87a8ab4">XVFrmbufWr_Stop()</a>.</p>

<p>Referenced by <a class="el" href="xv__frmbufwr__example_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a753a60297e59f4f58705e5b94f51e1fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* XVFrameBufferRdCallback </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for Frame Buffer Read interrupt. </p>
<p>This function is called when a Frame Buffer Read interrupt is received. It starts the frame buffer read operation by calling XVFrmbufRd_Start().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Pointer to user data (unused). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns NULL. </dd></dl>

<p>Referenced by <a class="el" href="xv__frmbufwr__example_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a93fa7cae040aad5d80e3f895d64631ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* XVFrameBufferWrCallback </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for Frame Buffer Write interrupt. </p>
<p>This function is called when a Frame Buffer Write interrupt is received. It starts the frame buffer write operation by invoking <a class="el" href="group__v__frmbuf__wr.html#ga62c170ef332a536b7461b3ce81def351" title="This function starts the core instance. ">XVFrmbufWr_Start()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Pointer to user data (unused in this implementation). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns NULL. </dd></dl>

<p>References <a class="el" href="group__v__frmbuf__wr.html#ga62c170ef332a536b7461b3ce81def351">XVFrmbufWr_Start()</a>.</p>

<p>Referenced by <a class="el" href="xv__frmbufwr__example_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
	<p class="footer">&copy; Copyright 2015-2022 Xilinx, Inc. All Rights Reserved.</p>
	<p class="footer">&copy; Copyright 2022-2023 Advanced Micro Devices, Inc. All Rights Reserved.</p>
</div>
</body>
</html>
