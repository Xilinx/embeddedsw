<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>intc: xintc_example.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="HTML_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xlogo_bg.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">intc
   </div>
   <div id="projectbrief">Vitis Drivers API Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="globals.html"><span>APIs</span></a></li>
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="pages.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('xintc__example_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">xintc_example.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<div class="textblock"><p>This file contains a design example using the Interrupt Controller driver (<a class="el" href="struct_x_intc.html" title="The XIntc driver instance data. ">XIntc</a>) and hardware device. </p>
<p>Please reference other device driver examples to see more examples of how the intc and interrupts can be used by a software application.</p>
<p>This example shows the use of the Interrupt Controller both with a PowerPC and MicroBlaze processor.</p>
<dl class="section note"><dt>Note</dt><dd>This example can also be used for Cascade mode interrupt controllers by using the interrupt IDs generated in xparameters.h. For Cascade mode, Interrupt IDs are generated in xparameters.h as shown below:</dd></dl>
<p>Master/Primary INTC </p>
<hr/>
<p> | |-0 Secondary INTC | |-. ______ | |-. | |-32 Last INTC | |-. | |-. ______ |______|&lt;&ndash;31--&mdash;| |-. | |-64 | |-. | |-. |______|&lt;&ndash;63---&mdash;| |-. | |-. |______|-95</p>
<p>All driver functions has to be called using DeviceId/InstancePtr of Primary/Master Controller only. Driver functions takes care of Slave Controllers based on Interrupt ID passed. User must not use Interrupt source/ID 31 of Primary and Secondary controllers to call driver functions.</p>
<pre></pre><pre>MODIFICATION HISTORY:
Ver   Who  Date  Changes
</p>
<hr/>
<p>
1.00b jhl  02/13/02 First release
1.00c rpm  11/13/03 Updated to show microblaze and PPC interrupt use and
              to use the common L0/L1 interrupt handler with device ID.
1.00c sv   06/29/05 Minor changes to comply to Doxygen and coding guidelines
2.00a ktn  10/20/09 Updated to use HAL Processor APIs amd minor modifications
              as per coding guidelines.
3.6   ms   01/23/17 Added xil_printf statement in main function to
                    ensure that "Successfully ran" and "Failed" strings
                    are available in all examples. This is a fix for
                    CR-965028.
</pre> </div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0421d50fd0512f77fa5f1e6f7abb8603"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xintc__example_8c.html#a0421d50fd0512f77fa5f1e6f7abb8603">IntcExample</a> (u16 DeviceId)</td></tr>
<tr class="memdesc:a0421d50fd0512f77fa5f1e6f7abb8603"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is an example of how to use the interrupt controller driver component (<a class="el" href="struct_x_intc.html" title="The XIntc driver instance data. ">XIntc</a>) and the hardware device.  <a href="#a0421d50fd0512f77fa5f1e6f7abb8603">More...</a><br/></td></tr>
<tr class="separator:a0421d50fd0512f77fa5f1e6f7abb8603"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea6614590c6c6eedade935ae1c1a26c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xintc__example_8c.html#aaea6614590c6c6eedade935ae1c1a26c">SetUpInterruptSystem</a> (<a class="el" href="struct_x_intc.html">XIntc</a> *XIntcInstancePtr)</td></tr>
<tr class="memdesc:aaea6614590c6c6eedade935ae1c1a26c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function connects the interrupt handler of the interrupt controller to the processor.  <a href="#aaea6614590c6c6eedade935ae1c1a26c">More...</a><br/></td></tr>
<tr class="separator:aaea6614590c6c6eedade935ae1c1a26c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d6264927eb02cdac505c92079fa9e03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xintc__example_8c.html#a2d6264927eb02cdac505c92079fa9e03">DeviceDriverHandler</a> (void *CallbackRef)</td></tr>
<tr class="memdesc:a2d6264927eb02cdac505c92079fa9e03"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is designed to look like an interrupt handler in a device driver.  <a href="#a2d6264927eb02cdac505c92079fa9e03">More...</a><br/></td></tr>
<tr class="separator:a2d6264927eb02cdac505c92079fa9e03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xintc__example_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the main function for the Interrupt Controller example.  <a href="#a840291bc02cba5474a4cb46a9b9566fe">More...</a><br/></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2d6264927eb02cdac505c92079fa9e03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DeviceDriverHandler </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>CallbackRef</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is designed to look like an interrupt handler in a device driver. </p>
<p>This is typically a 2nd level handler that is called from the interrupt controller interrupt handler. This handler would typically perform device specific processing such as reading and writing the registers of the device to clear the interrupt condition and pass any data to an application using the device driver. Many drivers already provide this handler and the user is not required to create it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">CallbackRef</td><td>is passed back to the device driver's interrupt handler by the <a class="el" href="struct_x_intc.html" title="The XIntc driver instance data. ">XIntc</a> driver. It was given to the <a class="el" href="struct_x_intc.html" title="The XIntc driver instance data. ">XIntc</a> driver in the <a class="el" href="group__intc.html#gaee9ec5873a764994d64b4da35a110084" title="Makes the connection between the Id of the interrupt source and the associated handler that is to run...">XIntc_Connect()</a> function call. It is typically a pointer to the device driver instance variable if using the Xilinx Level 1 device drivers. In this example, we do not care about the callback reference, so we passed it a 0 when connecting the handler to the <a class="el" href="struct_x_intc.html" title="The XIntc driver instance data. ">XIntc</a> driver and we make no use of it here.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>None.</dd></dl>
<p>This is typically a 2nd level handler that is called from the interrupt controller interrupt handler. This handler would typically perform device specific processing such as reading and writing the registers of the device to clear the interrupt condition and pass any data to an application using the device driver.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">CallbackRef</td><td>is passed back to the device driver's interrupt handler by the <a class="el" href="struct_x_intc.html" title="The XIntc driver instance data. ">XIntc</a> driver. It was given to the <a class="el" href="struct_x_intc.html" title="The XIntc driver instance data. ">XIntc</a> driver in the <a class="el" href="group__intc.html#gaee9ec5873a764994d64b4da35a110084" title="Makes the connection between the Id of the interrupt source and the associated handler that is to run...">XIntc_Connect()</a> function call. It is typically a pointer to the device driver instance variable if using the Xilinx Level 1 device drivers. In this example, we do not care about the callback reference, so we passed it a 0 when connecting the handler to the <a class="el" href="struct_x_intc.html" title="The XIntc driver instance data. ">XIntc</a> driver and we make no use of it here.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>None. </dd></dl>

<p>Referenced by <a class="el" href="xintc__low__level__example_8c.html#a83f2cbdf0d928c5fb6401e2abd071b56">IntcLowLevelExample()</a>, and <a class="el" href="xintc__example_8c.html#aaea6614590c6c6eedade935ae1c1a26c">SetUpInterruptSystem()</a>.</p>

</div>
</div>
<a class="anchor" id="a0421d50fd0512f77fa5f1e6f7abb8603"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int IntcExample </td>
          <td>(</td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>DeviceId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is an example of how to use the interrupt controller driver component (<a class="el" href="struct_x_intc.html" title="The XIntc driver instance data. ">XIntc</a>) and the hardware device. </p>
<p>This function is designed to work without any hardware devices to cause interrupts. It may not return if the interrupt controller is not properly connected to the processor in either software or hardware.</p>
<p>This function relies on the fact that the interrupt controller hardware has come out of the reset state such that it will allow interrupts to be simulated by the software.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">DeviceId</td><td>is Device ID of the Interrupt Controller Device, typically XPAR_&lt;INTC_instance&gt;_DEVICE_ID value from xparameters.h.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>XST_SUCCESS to indicate success, otherwise XST_FAILURE.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>None. </dd></dl>

<p>References <a class="el" href="xintc__example_8c.html#aaea6614590c6c6eedade935ae1c1a26c">SetUpInterruptSystem()</a>, <a class="el" href="group__intc.html#gaa7adc53d40c41e1a714ef8857329043d">XIntc_Initialize()</a>, <a class="el" href="group__intc.html#gaf9a9a16180b363930d21bc94dfe71147">XIntc_SelfTest()</a>, and <a class="el" href="group__intc.html#ga17972363ab5a1a8f5f1d135c5b3c22c7">XIntc_SimulateIntr()</a>.</p>

<p>Referenced by <a class="el" href="xintc__example_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the main function for the Interrupt Controller example. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>XST_SUCCESS to indicate success, otherwise XST_FAILURE.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>None. </dd></dl>

<p>References <a class="el" href="xintc__example_8c.html#a0421d50fd0512f77fa5f1e6f7abb8603">IntcExample()</a>.</p>

</div>
</div>
<a class="anchor" id="aaea6614590c6c6eedade935ae1c1a26c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SetUpInterruptSystem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_intc.html">XIntc</a> *&#160;</td>
          <td class="paramname"><em>XIntcInstancePtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function connects the interrupt handler of the interrupt controller to the processor. </p>
<p>This function is separate to allow it to be customized for each application. Each processor or RTOS may require unique processing to connect the interrupt handler.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>None. </dd></dl>

<p>References <a class="el" href="xintc__example_8c.html#a2d6264927eb02cdac505c92079fa9e03">DeviceDriverHandler()</a>, <a class="el" href="group__intc.html#gaefd5527cecdc1a6444b624d1e1a2514f">XIN_SIMULATION_MODE</a>, <a class="el" href="group__intc.html#gaee9ec5873a764994d64b4da35a110084">XIntc_Connect()</a>, <a class="el" href="group__intc.html#gac7f59192d3b3ba2e2283a264677577b8">XIntc_Enable()</a>, <a class="el" href="group__intc.html#ga635187ed756cee70b4b4051560cbd7bc">XIntc_InterruptHandler()</a>, and <a class="el" href="group__intc.html#ga863eb58a3ae9419c7ac5da7c9fa9cb50">XIntc_Start()</a>.</p>

<p>Referenced by <a class="el" href="xintc__example_8c.html#a0421d50fd0512f77fa5f1e6f7abb8603">IntcExample()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
	<p class="footer">&copy; Copyright 2015-2022 Xilinx, Inc. All Rights Reserved.</p>
	<p class="footer">&copy; Copyright 2022-2023 Advanced Micro Devices, Inc. All Rights Reserved.</p>
</div>
</body>
</html>
