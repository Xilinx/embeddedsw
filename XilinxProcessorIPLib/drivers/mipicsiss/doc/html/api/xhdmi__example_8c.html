<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>mipicsiss: xhdmi_example.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="HTML_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xlogo_bg.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">mipicsiss
   </div>
   <div id="projectbrief">Xilinx Vitis Drivers API Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="globals.html"><span>APIs</span></a></li>
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="pages.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('xhdmi__example_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">xhdmi_example.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<div class="textblock"><p>This file demonstrates how to use Xilinx HDMI TX Subsystem, HDMI RX Subsystem and Video PHY Controller drivers. </p>
<pre>
MODIFICATION HISTORY:</pre><pre>Ver   Who    Date     Changes
</p>
<hr/>
<p>
1.00         25/11/15 Initial release.
1.10         05/02/16 Updated function RxAuxCallback.
2.00  MG     02/03/15 Added upgraded with HDCP driver and overlay
2.10  MH     06/23/16 Added HDCP repeater support.
2.11  YH     04/08/16 Added two level validation routines
                      Basic_validation will only check the received VmId
                      PRBS_validation will check both video &amp; audio contents
2.12  GM     07/10/16 Added onboard SI5324 Initialization API to enable
                      125Mhz as NI-DRU reference clock
2.13  YH     03/01/16 Fixed a system hang issue by clearing TxBusy flag when
                           a non-supportedvideo resolution is set
                           during enable colorbar API
2.14  GM     23/01/17 Replace the Extraction Value of VPhy line rate with,
                           XHdmiphy1_GetLineRateHz Rate API return value.
2.15  ms     04/10/17 Modified filename tag to include the file in doxygen
                           examples.
2.16  mmo    05/05/17 Replace pre-processed interrupt vector ID with the
                           pre-processed canonical interrupt vector ID for
                           microblaze processor
2.17  YH     12/06/17 Removed unused PRBS validation related codes
                      Added VPHY error processing APIs and typedef
                      Placed Si5324 on reset on bonded mode in StartTxAfterRx
                      Changed printf usage to xil_printf
                      Changed "\n\r" in xil_printf calls to "\r\n"
2.18  mmo    21/07/17 Remove the i2c_dp159 API Call and
                           XHdmiphy1_Clkout1OBufTdsEnable API Call from the
                           TxStreamCallback API to avoid the race condition,
                           and replace to be call at the global while loop.
      MH     26/07/17 Set TMDS SCDC register after TX HPD toggle event
      GM     18/08/17 Added SI Initialization after the SI Reset in
                           StartTxAfterRx API
      YH     18/08/17 Add HDCP Ready checking before set down streams
      GM     28/08/17 Replace XHdmiphy1_HdmiInitialize API Call during
                     Initialization with XHdmiphy1_Hdmi_CfgInitialize API
                           Call
      mmo    04/10/17 Updated function TxStreamUpCallback to include
                           XhdmiACRCtrl_TMDSClkRatio API Call
      EB     06/11/17 Updated function RxAudCallback to allow pass-through
                           of audio format setting
3.00  mmo    29/12/17 Added EDID Parsing Capability
      EB     16/01/18 Added InfoFrame capability
      YH     16/01/18 Added video_bridge overflow interrupt
                      Added video_bridge unlock interrupt
      GM     16/01/18 Updated EnableColorBar to skip TX reconfiguration
                           when the requested TX video resolution
                           is not supported
      EB     23/01/18 Modified RxStreamUpCallback so that scrambling flag
                           is always enabled for HDMI 2.0 resolutions and
                           always disabled for HDMI 1.4 resolutions during
                           pass-through mode
      EB     26/01/18 Updated function UpdateFrameRate to use the API
                           XVidC_GetVideoModeIdExtensive
      MMO    08/02/18 Updated the EnableColorBar, UpdateFrameRate,
                           UpdateColorDepth, UpdateColorFormat API for
                           clean flow.
      GM              Added support for ZCU104
      SM     28/02/18 Added code to call API for setting App version to
                           support backward compatibility related issues.
3.01  EB     09/04/18 Updated XV_ConfigTpg and EnableColorBar APIs
             18/04/18 Updated RxBrdgOverflowCallback to remove printing
3.02  mmo    23/04/18 Added checking Sink Capability whether it's a DVI sink
                            or HDMI sink based on EDID-HDMI VSDB.
                      Fixed system flow to avoid RX Buffer Overflow during
                             transition.
                      Code Clean-Up on comments and 80 Characted per line.
                      Improve audio configuration during Pass-through mode.
                      Disable HDMI RX Video Stream when EnableColorBar API
                             is called.
                      Added TX Bridge Overflow and TX Bridge Underflow
3.03  YB     08/14/18 Clubbing Repeater specific code under the
                      'ENABLE_HDCP_REPEATER' macro.
      EB     09/21/18 Added new API ToggleHdmiRxHpd and SetHdmiRxHpd
                      Updated CloneTxEdid API
3.04  EB     03/01/19 Fixed an issue where TX's color space is not up-to-date
                             in pass-through mode
                      Fixed an issue where SCDC is not cleared when HPD is
                             toggled
                      Fixed an issue where TX stream doesn't come up when
                             hotplug is performed on HDMI 2.0 resolution in
                             loopback mode
      EB     03/08/19 Fixed an issue where loading of default EDID doesn't
                             toggle HPD
      mmo    03/08/19 Added "IsStreamUpHDCP" to enable the HDCP
                             Authentication on the first VSYNC of TX
</pre> </div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adcbba64f9438ee7f171f2718c6324474"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xhdmi__example_8c.html#adcbba64f9438ee7f171f2718c6324474">I2cMux</a> (void)</td></tr>
<tr class="memdesc:adcbba64f9438ee7f171f2718c6324474"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function setup SI5324 clock generator over IIC.  <a href="#adcbba64f9438ee7f171f2718c6324474"></a><br/></td></tr>
<tr class="separator:adcbba64f9438ee7f171f2718c6324474"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13f636ef2d93d7ee10e421e5f604a510"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xhdmi__example_8c.html#a13f636ef2d93d7ee10e421e5f604a510">I2cClk</a> (u32 InFreq, u32 OutFreq)</td></tr>
<tr class="memdesc:a13f636ef2d93d7ee10e421e5f604a510"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function setup SI5324 clock generator either in free or locked mode.  <a href="#a13f636ef2d93d7ee10e421e5f604a510"></a><br/></td></tr>
<tr class="separator:a13f636ef2d93d7ee10e421e5f604a510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14b96491d9e48ad8fadbbb391d097ab6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xhdmi__example_8c.html#a14b96491d9e48ad8fadbbb391d097ab6">Info</a> (void)</td></tr>
<tr class="memdesc:a14b96491d9e48ad8fadbbb391d097ab6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function outputs the video timing , Audio, Link Status, HDMI RX state of HDMI RX core.  <a href="#a14b96491d9e48ad8fadbbb391d097ab6"></a><br/></td></tr>
<tr class="separator:a14b96491d9e48ad8fadbbb391d097ab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49f86eb6133d393764f7512a55c8b918"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xhdmi__example_8c.html#a49f86eb6133d393764f7512a55c8b918">Hdmiphy1ErrorCallback</a> (void *CallbackRef)</td></tr>
<tr class="memdesc:a49f86eb6133d393764f7512a55c8b918"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called whenever an error condition in VPHY occurs.  <a href="#a49f86eb6133d393764f7512a55c8b918"></a><br/></td></tr>
<tr class="separator:a49f86eb6133d393764f7512a55c8b918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00804c9887066c8b73a180344f5c4dbc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xhdmi__example_8c.html#a00804c9887066c8b73a180344f5c4dbc">Hdmiphy1ProcessError</a> (void)</td></tr>
<tr class="memdesc:a00804c9887066c8b73a180344f5c4dbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called in the application to process the pending VPHY errors.  <a href="#a00804c9887066c8b73a180344f5c4dbc"></a><br/></td></tr>
<tr class="separator:a00804c9887066c8b73a180344f5c4dbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab95c1e72946010427c5c708682b5ac81"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xhdmi__example_8c.html#ab95c1e72946010427c5c708682b5ac81">config_hdmi</a> ()</td></tr>
<tr class="memdesc:ab95c1e72946010427c5c708682b5ac81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function to call example with HDMI TX, HDMI RX and HDMI GT drivers.  <a href="#ab95c1e72946010427c5c708682b5ac81"></a><br/></td></tr>
<tr class="separator:ab95c1e72946010427c5c708682b5ac81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab59a79a96c9e624f4d3c76d2c788ba3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_x_hdmi___menu.html">XHdmi_Menu</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xhdmi__example_8c.html#ab59a79a96c9e624f4d3c76d2c788ba3a">HdmiMenu</a></td></tr>
<tr class="memdesc:ab59a79a96c9e624f4d3c76d2c788ba3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Demo mode IsPassThrough (TRUE) = Pass-through mode (FALSE) = Color Bar mode.  <a href="#ab59a79a96c9e624f4d3c76d2c788ba3a"></a><br/></td></tr>
<tr class="separator:ab59a79a96c9e624f4d3c76d2c788ba3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d5525edd4cf0958da26f4eb70d24b85"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xhdmi__example_8c.html#a2d5525edd4cf0958da26f4eb70d24b85">IsPassThrough</a> = (FALSE)</td></tr>
<tr class="memdesc:a2d5525edd4cf0958da26f4eb70d24b85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Demo mode 0-colorbar 1-pass through.  <a href="#a2d5525edd4cf0958da26f4eb70d24b85"></a><br/></td></tr>
<tr class="separator:a2d5525edd4cf0958da26f4eb70d24b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ab95c1e72946010427c5c708682b5ac81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int config_hdmi </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function to call example with HDMI TX, HDMI RX and HDMI GT drivers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XST_SUCCESS if HDMI example was successfully.</li>
<li>XST_FAILURE if HDMI example failed.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>None. </dd></dl>

<p>References <a class="el" href="xhdmi__example_8c.html#a49f86eb6133d393764f7512a55c8b918">Hdmiphy1ErrorCallback()</a>, <a class="el" href="xmipi__example_8c.html#a71bd0b63917e21a117972939353bda39">I2C_CLK_ADDR</a>, <a class="el" href="xmipi__example_8c.html#a13f636ef2d93d7ee10e421e5f604a510">I2cClk()</a>, <a class="el" href="group___i_d_t__8_t49_n24x.html#ga8682f371519c86ef2e8880298dd12e54">IDT_8T49N24x_Init()</a>, <a class="el" href="xmipi__example_8c.html#ac493d3aecd3ba27b1c359fac5403bcc4">TxConnectCallback()</a>, <a class="el" href="xmipi__example_8c.html#a58d2813cae3d1fee94b6cc619f827911">TxStreamDownCallback()</a>, <a class="el" href="xmipi__example_8c.html#a1d9aa9958743b89bbebf1e4fc360cccc">TxStreamUpCallback()</a>, <a class="el" href="xmipi__example_8c.html#a867454807fce16217777a7c356010b5a">TxVsCallback()</a>, <a class="el" href="xhdmi__hdcp__keys_8c.html#a1a85fb59f068baefa8d04e243f468e25">XHdcp_KeyManagerInit()</a>, and <a class="el" href="xhdmi__hdcp__keys_8c.html#aecaae90ea9d3f9e2720059eb0b83dd6e">XHdcp_LoadKeys()</a>.</p>

</div>
</div>
<a class="anchor" id="a49f86eb6133d393764f7512a55c8b918"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Hdmiphy1ErrorCallback </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>CallbackRef</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called whenever an error condition in VPHY occurs. </p>
<p>This will fill the FIFO of VPHY error events which will be processed outside the ISR.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">CallbackRef</td><td>is the VPHY instance pointer </td></tr>
    <tr><td class="paramname">ErrIrqType</td><td>is the VPHY error type</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>None. </dd></dl>

<p>Referenced by <a class="el" href="xhdmi__example_8c.html#ab95c1e72946010427c5c708682b5ac81">config_hdmi()</a>.</p>

</div>
</div>
<a class="anchor" id="a00804c9887066c8b73a180344f5c4dbc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Hdmiphy1ProcessError </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called in the application to process the pending VPHY errors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function can be expanded to perform necessary actions depending on the error type. For example, XHDMIPHY1_ERR_PLL_LAYOUT can be used to automatically switch in and out of bonded mode for GTXE2 devices </dd></dl>

</div>
</div>
<a class="anchor" id="a13f636ef2d93d7ee10e421e5f604a510"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int I2cClk </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>InFreq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>OutFreq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function setup SI5324 clock generator either in free or locked mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Index</td><td>specifies an index for selecting mode frequency. </td></tr>
    <tr><td class="paramname">Mode</td><td>specifies either free or locked mode.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>Zero if error in programming external clock.</li>
<li>One if programmed external clock.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>None. </dd></dl>

<p>References <a class="el" href="xmipi__example_8c.html#a71bd0b63917e21a117972939353bda39">I2C_CLK_ADDR</a>.</p>

</div>
</div>
<a class="anchor" id="adcbba64f9438ee7f171f2718c6324474"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int I2cMux </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function setup SI5324 clock generator over IIC. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes sent.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>None. </dd></dl>

</div>
</div>
<a class="anchor" id="a14b96491d9e48ad8fadbbb391d097ab6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Info </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function outputs the video timing , Audio, Link Status, HDMI RX state of HDMI RX core. </p>
<p>In addition, it also prints information about HDMI TX, and HDMI GT cores.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>None. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ab59a79a96c9e624f4d3c76d2c788ba3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_x_hdmi___menu.html">XHdmi_Menu</a> HdmiMenu</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Demo mode IsPassThrough (TRUE) = Pass-through mode (FALSE) = Color Bar mode. </p>

</div>
</div>
<a class="anchor" id="a2d5525edd4cf0958da26f4eb70d24b85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 IsPassThrough = (FALSE)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Demo mode 0-colorbar 1-pass through. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright &copy; 2015 Xilinx Inc. All rights reserved.</li>
  </ul>
</div>
</body>
</html>
