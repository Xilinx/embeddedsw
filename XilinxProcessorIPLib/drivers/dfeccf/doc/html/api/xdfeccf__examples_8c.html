<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>dfeccf: xdfeccf_examples.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="HTML_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xlogo_bg.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">dfeccf
   </div>
   <div id="projectbrief">Vitis Drivers API Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="globals.html"><span>APIs</span></a></li>
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="pages.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('xdfeccf__examples_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">xdfeccf_examples.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<div class="textblock"><p>This file contains the examples main function. </p>
<p>Note: MGT si570 oscillator is set to 152.25MHz by default. The DFE IP wrapper requires MGT clock to be set to 122.88MHz (some IP use 61.44MHz). Prerequisite is to set the MGT si570 oscillator to the required IP before running the example code. This is for the ZCU670 production platform.</p>
<pre></pre><pre>MODIFICATION HISTORY:</pre><pre>Ver   Who    Date     Changes
</p>
<hr/>
<p>
1.0   dc     12/06/20 Initial version
      dc     01/04/21 Set mgt si570 oscillator to 122.88MHz
      dc     02/02/21 Remove hard coded device node name
      dc     02/08/21 align driver to current specification
      dc     02/22/21 include HW in versioning
      dc     04/06/21 Register with full node name
      dc     04/07/21 Fix bare metal initialisation
      dc     04/08/21 Set sequence length only once
1.1   dc     07/13/21 Update to common latency requirements
      dc     07/21/21 Add and reorganise examples
1.2   dc     11/01/21 Add multi AddCC, RemoveCC and UpdateCC
1.3   dc     03/21/22 Add prefix to global variables
1.5   dc     10/28/22 Switching Uplink/Downlink support
1.6   cog    07/18/23 Modify example for SDT flow
1.7   cog    04/20/24 Configure si570 in Linux examples</pre><pre></pre> </div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0ddb0f8ca495eb4e99eabc79fc0d41d1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdfeccf__examples_8c.html#a0ddb0f8ca495eb4e99eabc79fc0d41d1">XDfeSi570_SetMgtOscillator</a> (double CurrentFrequency, double NewFrequency)</td></tr>
<tr class="memdesc:a0ddb0f8ca495eb4e99eabc79fc0d41d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function: initialize I2C bus, reads current state of si570, calculates parameters for si570 MGT oscillator new frequency, writes them to si570 and resets PL to use the new frequency.  <a href="#a0ddb0f8ca495eb4e99eabc79fc0d41d1">More...</a><br/></td></tr>
<tr class="separator:a0ddb0f8ca495eb4e99eabc79fc0d41d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e35acd47a43b212159caf45bf8ae1fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfeccf.html#ga9e35acd47a43b212159caf45bf8ae1fb">XDfeCcf_MultiInstancesExample</a> ()</td></tr>
<tr class="memdesc:ga9e35acd47a43b212159caf45bf8ae1fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This example runs two instances of DFE Channel Filter.  <a href="group__dfeccf.html#ga9e35acd47a43b212159caf45bf8ae1fb">More...</a><br/></td></tr>
<tr class="separator:ga9e35acd47a43b212159caf45bf8ae1fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e4a59a64bb3ee3a50a0ea8802942969"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdfeccf__examples_8c.html#a6e4a59a64bb3ee3a50a0ea8802942969">XDfeCcf_PassThroughExample</a> ()</td></tr>
<tr class="memdesc:a6e4a59a64bb3ee3a50a0ea8802942969"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function runs the DFE Channel Filter device using the driver APIs.  <a href="#a6e4a59a64bb3ee3a50a0ea8802942969">More...</a><br/></td></tr>
<tr class="separator:a6e4a59a64bb3ee3a50a0ea8802942969"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23a4ce2ee3c9bf313b65a3b932c0278b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dfeccf.html#ga23a4ce2ee3c9bf313b65a3b932c0278b">XDfeCcf_multiAddCC_1xNR100_3xNR20_Example</a> ()</td></tr>
<tr class="memdesc:ga23a4ce2ee3c9bf313b65a3b932c0278b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This example configures Channel Filter driver for one NR100 carrier and three NR20 whit multiAddCC API and at the end close and release the driver.  <a href="group__dfeccf.html#ga23a4ce2ee3c9bf313b65a3b932c0278b">More...</a><br/></td></tr>
<tr class="separator:ga23a4ce2ee3c9bf313b65a3b932c0278b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdfeccf__examples_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function that initialise si570 and runs examples.  <a href="#a840291bc02cba5474a4cb46a9b9566fe">More...</a><br/></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function that initialise si570 and runs examples. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XST_SUCCESS if the example has completed successfully.</li>
<li>XST_FAILURE if the example has failed. </li>
</ul>
</dd></dl>

<p>References <a class="el" href="group__dfeccf.html#ga23a4ce2ee3c9bf313b65a3b932c0278b">XDfeCcf_multiAddCC_1xNR100_3xNR20_Example()</a>, <a class="el" href="group__dfeccf.html#ga9e35acd47a43b212159caf45bf8ae1fb">XDfeCcf_MultiInstancesExample()</a>, <a class="el" href="xdfeccf__examples_8c.html#a6e4a59a64bb3ee3a50a0ea8802942969">XDfeCcf_PassThroughExample()</a>, <a class="el" href="xdfeccf__examples_8c.html#a0ddb0f8ca495eb4e99eabc79fc0d41d1">XDfeSi570_SetMgtOscillator()</a>, <a class="el" href="group__dfeccf.html#ga9478d2b97aa40e09052dee2571940ef9">XST_FAILURE</a>, and <a class="el" href="group__dfeccf.html#ga959ffc15251ddc9b3a883a30f97b7715">XST_SUCCESS</a>.</p>

</div>
</div>
<a class="anchor" id="a6e4a59a64bb3ee3a50a0ea8802942969"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XDfeCcf_PassThroughExample </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function runs the DFE Channel Filter device using the driver APIs. </p>
<p>This function does the following tasks:</p>
<ul>
<li>Create and system initialize the device driver instance.</li>
<li>Read SW and HW version numbers.</li>
<li>Reset the device.</li>
<li>Configure the device.</li>
<li>Initialize the device.</li>
<li>Set the triggers</li>
<li>Activate the device.</li>
<li>Load a channel filter coefficients.</li>
<li>Add CC.</li>
<li>DeActivate the device.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XST_SUCCESS if the example has completed successfully.</li>
<li>XST_FAILURE if the example has failed. </li>
</ul>
</dd></dl>

<p>References <a class="el" href="struct_x_dfe_ccf___trigger_cfg.html#a8e0fd292605e716b1e580cca643140f9">XDfeCcf_TriggerCfg::Activate</a>, <a class="el" href="struct_x_dfe_ccf___status.html#a18b5b8ebcd0324b23abdda08a124f4b1">XDfeCcf_Status::CCSequenceError</a>, <a class="el" href="struct_x_dfe_ccf___trigger_cfg.html#ab268b98412be113d4be332409eacb24e">XDfeCcf_TriggerCfg::CCUpdate</a>, <a class="el" href="struct_x_dfe_ccf___status.html#a64f494d148062c29e4bdfd2eee5a5897">XDfeCcf_Status::CCUpdate</a>, <a class="el" href="struct_x_dfe_ccf___carrier_cfg.html#a173a44d57df127ae6f699998b1d5291b">XDfeCcf_CarrierCfg::Gain</a>, <a class="el" href="struct_x_dfe_ccf___init.html#ae158951ef0ce8ea7c1726d0590cb3231">XDfeCcf_Init::GainStage</a>, <a class="el" href="struct_x_dfe_ccf___carrier_cfg.html#a7226c29ffda01e9c56d3ed701bd9f274">XDfeCcf_CarrierCfg::ImagCoeffSet</a>, <a class="el" href="struct_x_dfe_ccf___c_c_sequence.html#a36267b2f5389400df112003f4d4736b6">XDfeCcf_CCSequence::Length</a>, <a class="el" href="struct_x_dfe_ccf___version.html#a256d43186042de1081540877baf29022">XDfeCcf_Version::Major</a>, <a class="el" href="struct_x_dfe_ccf___version.html#a2b2d70cba4fc2f5ffab0da34c0038ee4">XDfeCcf_Version::Minor</a>, <a class="el" href="struct_x_dfe_ccf___trigger.html#ad3425932d5c5d5eeed83626352cff051">XDfeCcf_Trigger::Mode</a>, <a class="el" href="struct_x_dfe_ccf___coefficients.html#ad1fd3761a5756748f27999add2fa43a2">XDfeCcf_Coefficients::Num</a>, <a class="el" href="struct_x_dfe_ccf___status.html#ab78ac3eb12e3ea828f6dde34c258e8c1">XDfeCcf_Status::Overflow</a>, <a class="el" href="struct_x_dfe_ccf___version.html#a8e73945c3ac762a34b5af546a55d66f2">XDfeCcf_Version::Patch</a>, <a class="el" href="struct_x_dfe_ccf___carrier_cfg.html#a255ccae92608e4170f1d4b47c8132412">XDfeCcf_CarrierCfg::RealCoeffSet</a>, <a class="el" href="struct_x_dfe_ccf___version.html#a3296cc94083b4a0342053b2c26da5a77">XDfeCcf_Version::Revision</a>, <a class="el" href="struct_x_dfe_ccf___init.html#a33a2bd2ba08ad2526b80ed3e60338537">XDfeCcf_Init::Sequence</a>, <a class="el" href="struct_x_dfe_ccf___coefficients.html#abf7037bea46a3bea957c5c61bf769f85">XDfeCcf_Coefficients::Symmetric</a>, <a class="el" href="struct_x_dfe_ccf___trigger.html#a14a3f0a4e6da803d48d252e6720d352f">XDfeCcf_Trigger::TUSERBit</a>, <a class="el" href="struct_x_dfe_ccf___trigger.html#af705f9aaa7971ea54ebccba554007dce">XDfeCcf_Trigger::TuserEdgeLevel</a>, <a class="el" href="struct_x_dfe_ccf___init.html#ad4cfb3484ed25bd566a28943eb6f6566">XDfeCcf_Init::TuserSelect</a>, <a class="el" href="struct_x_dfe_ccf___coefficients.html#a451f67197f8a1cc8b44708b08c409ca1">XDfeCcf_Coefficients::Value</a>, <a class="el" href="group__dfeccf.html#ga6fec5800f070fd68474f513b9d95aad7">XDfeCcf_Activate()</a>, <a class="el" href="group__dfeccf.html#ga2bfa4131ce8d5857886eafa44a99f6bb">XDfeCcf_AddCC()</a>, <a class="el" href="group__dfeccf.html#ga6ced5736831794879ad88390a58e6a3e">XDfeCcf_ClearEventStatus()</a>, <a class="el" href="group__dfeccf.html#ga59ba4de329a470946d9fc2a040d7a492">XDfeCcf_Configure()</a>, <a class="el" href="group__dfeccf.html#gad8a56e64a51a4cbea54dd830f33730e2">XDfeCcf_Deactivate()</a>, <a class="el" href="group__dfeccf.html#gaddc6102af25a271aedf00ec96b315f4e">XDfeCcf_GetVersions()</a>, <a class="el" href="group__dfeccf.html#gaf8c982653b47be37c3ad6a374142984f">XDfeCcf_Initialize()</a>, <a class="el" href="group__dfeccf.html#ga9d2ea94dbf78348129a5ef459b9e7483">XDfeCcf_InstanceClose()</a>, <a class="el" href="group__dfeccf.html#ga664e353c81bd46ef9cd1bc562504af52">XDfeCcf_InstanceInit()</a>, <a class="el" href="group__dfeccf.html#gae4ded5b6e8aefa55eb911df631fdedd2">XDfeCcf_LoadCoefficients()</a>, <a class="el" href="group__dfeccf.html#gaf3cd62fb4f6a5924a14f99a311167d91">XDfeCcf_Reset()</a>, <a class="el" href="group__dfeccf.html#ga7b3d2fde4403c86dc13478fadb4665ab">XDfeCcf_SetTriggersCfg()</a>, <a class="el" href="group__dfeccf.html#ga9478d2b97aa40e09052dee2571940ef9">XST_FAILURE</a>, and <a class="el" href="group__dfeccf.html#ga959ffc15251ddc9b3a883a30f97b7715">XST_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="xdfeccf__examples_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ddb0f8ca495eb4e99eabc79fc0d41d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XDfeSi570_SetMgtOscillator </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>CurrentFrequency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>NewFrequency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function: initialize I2C bus, reads current state of si570, calculates parameters for si570 MGT oscillator new frequency, writes them to si570 and resets PL to use the new frequency. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">CurrentFrequency</td><td>MGT oscillator current frequency. </td></tr>
    <tr><td class="paramname">NewFrequency</td><td>MGT oscillator new frequency.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<dl class="section note"><dt>Note</dt><dd>None </dd></dl>

<p>References <a class="el" href="group__dfeccf.html#ga9478d2b97aa40e09052dee2571940ef9">XST_FAILURE</a>, and <a class="el" href="group__dfeccf.html#ga959ffc15251ddc9b3a883a30f97b7715">XST_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="xdfeccf__examples_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
	<p class="footer">&copy; Copyright 2015-2022 Xilinx, Inc. All Rights Reserved.</p>
	<p class="footer">&copy; Copyright 2022-2023 Advanced Micro Devices, Inc. All Rights Reserved.</p>
</div>
</body>
</html>
