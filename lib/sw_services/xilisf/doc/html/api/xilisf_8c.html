<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>xilisf: xilisf.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="HTML_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xlogo_bg.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">xilisf
   </div>
   <div id="projectbrief">Xilinx Vitis Drivers API Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="globals.html"><span>APIs</span></a></li>
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('xilisf_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">xilisf.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<div class="textblock"><p>This file contains the library functions to initialize, control and read the device information of the Serial Flash devices. </p>
<p>Refer <a class="el" href="xilisf_8h.html">xilisf.h</a> for detailed description.</p>
<pre></pre><pre>MODIFICATION HISTORY:</pre><pre>Ver   Who      Date     Changes
</p>
<hr/>
<p>
1.00a ksu/sdm  03/03/08 First release
1.00a sdm      07/02/08 Changed the initialization so that the SPI
                  Master works in Spi Mode 3 as the In-System Flash
                  works only in Spi Mode 3
2.00a ktn       11/27/09 Updated to use HAL processor APIs/definitions
2.01a sdm       01/04/10 Added Support for Winbond W25QXX/W25XX devices
                  The parameter PagesPerBlock in the struct
                  IntelStmDeviceGeometry has been renamed to
                  PagesPerSector.
2.03a sdm      04/17/10 Updated to support Winbond memory W25Q128.
2.04a sdm      08/17/10 Updated to support Numonyx (N25QXX) and Spansion
                  flash memories
3.00a srt        06/20/12 Updated to support interfaces SPI PS and QSPI PS.
            New API:
              <a class="el" href="group__xilisf__apis.html#ga6c7ef14db6c7aed54633ba3a1269e570" title="This API registers the interface SPI/SPI PS/QSPI PS. ">XIsf_RegisterInterface()</a>
              <a class="el" href="group__xilisf__apis.html#ga45d09baa6b0b3624a92fcf0804a98e3e" title="This API sets the configuration of SPI. ">XIsf_SetSpiConfiguration()</a>
              XIsf_SetTransferMode()
            Changed API:
              <a class="el" href="group__xilisf__apis.html#ga501655dbcf851b69f07ab41b7fc3cceb" title="This API when called initializes the SPI interface with default settings. ">XIsf_Initialize()</a>
              XIsf_Transfer()
            Added support to SST flash.
3.01a srt        02/06/13 Updated for changes made in QSPIPS driver
                  (CR 698107).
5.0   sb         08/05/14 Updated for support for &gt; 128 MB flash for PSQSPI
            Interface. Added Library Handler API which will
            register to driver interrupts, based upon the
            interface selected.
            New API:
              SpaMicWinFlashInitialize()
              <a class="el" href="group__xilisf__apis.html#ga4595fb70c718a30beea05f9874c8c594" title="Function to get the real address of flash in case dual parallel and stacked configuration. ">GetRealAddr()</a>
              SendBankSelect()
              <a class="el" href="group__xilisf__apis.html#ga0b420adfdbfd092d01636cecb03ebe87" title="This API is to set the Status Handler when an interrupt is registered. ">XIsf_SetStatusHandler()</a>
              void <a class="el" href="group__xilisf__apis.html#ga5e2b2f839618eb2c9db8fbe73472ae79" title="This API is the handler which performs processing for the QSPI driver. ">XIsf_IfaceHandler()</a>
            Changed API:</p>
<ul>
<li><a class="el" href="group__xilisf__apis.html#ga501655dbcf851b69f07ab41b7fc3cceb" title="This API when called initializes the SPI interface with default settings. ">XIsf_Initialize()</a>
              Added Call back to lib interrupt handler
              after XIsf_Transfer Call</li>
<li>XIsf_Transfer()</li>
<li><a class="el" href="group__xilisf__apis.html#gaeec145db288b28ebdab75b6cea5ca58b" title="This API reads the Serial Flash Status Register. ">XIsf_GetStatus()</a></li>
<li><a class="el" href="group__xilisf__apis.html#gacba1356625d40544d7b082ac1b907b2b" title="This API reads the Serial Flash Status Register 2. ">XIsf_GetStatusReg2()</a></li>
<li><a class="el" href="group__xilisf__apis.html#ga2edd016671a61c0a742870555b4465a7" title="This API reads the Joint Electron Device Engineering Council (JEDEC) information of the Serial Flash...">XIsf_GetDeviceInfo()</a></li>
<li><a class="el" href="group__xilisf__apis.html#ga9a762983b1b738d61316a3d95a60dfc6" title="This API Enables/Disables writes to the Intel, STM, Winbond and Spansion Serial Flash. ">XIsf_WriteEnable()</a></li>
<li><a class="el" href="group__xilisf__apis.html#gaa69a6725295448e81f1f93fd324887a1" title="This API configures and controls the Intel, STM, Winbond and Spansion Serial Flash. ">XIsf_Ioctl()</a>
5.1   sb         12/23/14 Added check for flash interface for Winbond, Spansion
                  and Micron flash family for PSQSPI.
5.2   asa  05/12/15 Added APIs to support 4 byte addressing for Micron flash.
                    2 APIs were added, one to enter into 4 byte mode and
                    the other to exit from the same.
5.3   sk   08/07/17 Added QSPIPSU flash interface support for ZynqMP.
5.4   nsk  09/14/15 Updated IntelStmDevices list to support Micron N25Q256A
                    (CR 881478).
5.5   sk   01/14/16 Updated IntelStmDevices list to add support for S25FL512S
                    and S25FL256S.
      sk   03/02/16 Added support for MT25QU01G.
5.9   ms   08/03/17 Added tags and modified comment lines style for doxygen.
5.10  tjs  11/30/17 Added description of S25FL-L series flash
                    parts in IntelStmDevices array. CR# 987566
5.10    tjs  03/01/18 Added MT25Q512 3V and 1.8V flash part support. CR# 995477
5.11    tjs  03/16/18 Added support for ISSI flash part.
5.12    tjs  05/02/18 Added support for IS25LP064A and IS25WP064A.
5.12  tjs  06/05/18 Added support for Macronix 1G flash parts. CR#978447
5.12 tjs         06/18/18 Removed checkpatch and gcc warnings.
5.12 tjs  06/18/18 Added support for MT25QL01G and MT25QL02G 3V
                                  flash.CR#1004264
5.12 tjs  06/18/18 Added support for low density ISSI
              flash parts. PR#9237
5.13 nsk  01/22/19 Make variable declaration to XQspiPsu_Msg as global
                   CR#1015808.
5.13 akm  01/30/19 Fixed multiple definition error in C++ project
                        CR#1019773
     sk   02/11/19 Added support for OSPI flash interface.
5.13    akm  02/26/19 Added support for ISSI serial NOR Flash Devices.
                           PR# 11442
     sk   02/28/19 Added support for SST26WF016B flash.
5.14    akm  08/01/19 Initialized Status variable to XST_FAILURE.</li>
</ul>
</pre><pre></pre> </div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afbd9dc9a545164602274a259c1f49dd8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilisf_8c.html#afbd9dc9a545164602274a259c1f49dd8">SIXTEENMB</a>&#160;&#160;&#160;0x1000000</td></tr>
<tr class="memdesc:afbd9dc9a545164602274a259c1f49dd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sixteen MB.  <a href="#afbd9dc9a545164602274a259c1f49dd8">More...</a><br/></td></tr>
<tr class="separator:afbd9dc9a545164602274a259c1f49dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga501655dbcf851b69f07ab41b7fc3cceb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xilisf__apis.html#ga501655dbcf851b69f07ab41b7fc3cceb">XIsf_Initialize</a> (XIsf *InstancePtr, XIsf_Iface *SpiInstPtr, u8 SlaveSelect, u8 *WritePtr)</td></tr>
<tr class="memdesc:ga501655dbcf851b69f07ab41b7fc3cceb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API when called initializes the SPI interface with default settings.  <a href="group__xilisf__apis.html#ga501655dbcf851b69f07ab41b7fc3cceb">More...</a><br/></td></tr>
<tr class="separator:ga501655dbcf851b69f07ab41b7fc3cceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45d09baa6b0b3624a92fcf0804a98e3e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xilisf__apis.html#ga45d09baa6b0b3624a92fcf0804a98e3e">XIsf_SetSpiConfiguration</a> (XIsf *InstancePtr, XIsf_Iface *SpiInstPtr, u32 Options, u8 PreScaler)</td></tr>
<tr class="memdesc:ga45d09baa6b0b3624a92fcf0804a98e3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API sets the configuration of SPI.  <a href="group__xilisf__apis.html#ga45d09baa6b0b3624a92fcf0804a98e3e">More...</a><br/></td></tr>
<tr class="separator:ga45d09baa6b0b3624a92fcf0804a98e3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeec145db288b28ebdab75b6cea5ca58b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xilisf__apis.html#gaeec145db288b28ebdab75b6cea5ca58b">XIsf_GetStatus</a> (XIsf *InstancePtr, u8 *ReadPtr)</td></tr>
<tr class="memdesc:gaeec145db288b28ebdab75b6cea5ca58b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API reads the Serial Flash Status Register.  <a href="group__xilisf__apis.html#gaeec145db288b28ebdab75b6cea5ca58b">More...</a><br/></td></tr>
<tr class="separator:gaeec145db288b28ebdab75b6cea5ca58b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacba1356625d40544d7b082ac1b907b2b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xilisf__apis.html#gacba1356625d40544d7b082ac1b907b2b">XIsf_GetStatusReg2</a> (XIsf *InstancePtr, u8 *ReadPtr)</td></tr>
<tr class="memdesc:gacba1356625d40544d7b082ac1b907b2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API reads the Serial Flash Status Register 2.  <a href="group__xilisf__apis.html#gacba1356625d40544d7b082ac1b907b2b">More...</a><br/></td></tr>
<tr class="separator:gacba1356625d40544d7b082ac1b907b2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2edd016671a61c0a742870555b4465a7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xilisf__apis.html#ga2edd016671a61c0a742870555b4465a7">XIsf_GetDeviceInfo</a> (XIsf *InstancePtr, u8 *ReadPtr)</td></tr>
<tr class="memdesc:ga2edd016671a61c0a742870555b4465a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API reads the Joint Electron Device Engineering Council (JEDEC) information of the Serial Flash.  <a href="group__xilisf__apis.html#ga2edd016671a61c0a742870555b4465a7">More...</a><br/></td></tr>
<tr class="separator:ga2edd016671a61c0a742870555b4465a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a762983b1b738d61316a3d95a60dfc6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xilisf__apis.html#ga9a762983b1b738d61316a3d95a60dfc6">XIsf_WriteEnable</a> (XIsf *InstancePtr, u8 WriteEnable)</td></tr>
<tr class="memdesc:ga9a762983b1b738d61316a3d95a60dfc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API Enables/Disables writes to the Intel, STM, Winbond and Spansion Serial Flash.  <a href="group__xilisf__apis.html#ga9a762983b1b738d61316a3d95a60dfc6">More...</a><br/></td></tr>
<tr class="separator:ga9a762983b1b738d61316a3d95a60dfc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa69a6725295448e81f1f93fd324887a1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xilisf__apis.html#gaa69a6725295448e81f1f93fd324887a1">XIsf_Ioctl</a> (XIsf *InstancePtr, XIsf_IoctlOperation Operation)</td></tr>
<tr class="memdesc:gaa69a6725295448e81f1f93fd324887a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API configures and controls the Intel, STM, Winbond and Spansion Serial Flash.  <a href="group__xilisf__apis.html#gaa69a6725295448e81f1f93fd324887a1">More...</a><br/></td></tr>
<tr class="separator:gaa69a6725295448e81f1f93fd324887a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6c7ef14db6c7aed54633ba3a1269e570"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xilisf__apis.html#ga6c7ef14db6c7aed54633ba3a1269e570">XIsf_RegisterInterface</a> (XIsf *InstancePtr)</td></tr>
<tr class="memdesc:ga6c7ef14db6c7aed54633ba3a1269e570"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API registers the interface SPI/SPI PS/QSPI PS.  <a href="group__xilisf__apis.html#ga6c7ef14db6c7aed54633ba3a1269e570">More...</a><br/></td></tr>
<tr class="separator:ga6c7ef14db6c7aed54633ba3a1269e570"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4595fb70c718a30beea05f9874c8c594"><td class="memItemLeft" align="right" valign="top">u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xilisf__apis.html#ga4595fb70c718a30beea05f9874c8c594">GetRealAddr</a> (XIsf_Iface *QspiPtr, u32 Address)</td></tr>
<tr class="memdesc:ga4595fb70c718a30beea05f9874c8c594"><td class="mdescLeft">&#160;</td><td class="mdescRight">(((XPAR_XISF_FLASH_FAMILY == WINBOND) || \ (XPAR_XISF_FLASH_FAMILY == SPANSION)) &amp;&amp; \ (defined(XPAR_XISF_INTERFACE_PSQSPI) || \ defined (XPAR_XISF_INTERFACE_QSPIPSU) || \ defined(XPAR_XISF_INTERFACE_OSPIPSV)))  <a href="group__xilisf__apis.html#ga4595fb70c718a30beea05f9874c8c594">More...</a><br/></td></tr>
<tr class="separator:ga4595fb70c718a30beea05f9874c8c594"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0b420adfdbfd092d01636cecb03ebe87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xilisf__apis.html#ga0b420adfdbfd092d01636cecb03ebe87">XIsf_SetStatusHandler</a> (XIsf *InstancePtr, XIsf_Iface *XIfaceInstancePtr, XIsf_StatusHandler XilIsf_Handler)</td></tr>
<tr class="memdesc:ga0b420adfdbfd092d01636cecb03ebe87"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API is to set the Status Handler when an interrupt is registered.  <a href="group__xilisf__apis.html#ga0b420adfdbfd092d01636cecb03ebe87">More...</a><br/></td></tr>
<tr class="separator:ga0b420adfdbfd092d01636cecb03ebe87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e2b2f839618eb2c9db8fbe73472ae79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xilisf__apis.html#ga5e2b2f839618eb2c9db8fbe73472ae79">XIsf_IfaceHandler</a> (void *CallBackRef, u32 StatusEvent, unsigned int ByteCount)</td></tr>
<tr class="memdesc:ga5e2b2f839618eb2c9db8fbe73472ae79"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API is the handler which performs processing for the QSPI driver.  <a href="group__xilisf__apis.html#ga5e2b2f839618eb2c9db8fbe73472ae79">More...</a><br/></td></tr>
<tr class="separator:ga5e2b2f839618eb2c9db8fbe73472ae79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a10e91f1922dd5bc7da2e03c3e0e86d75"><td class="memItemLeft" align="right" valign="top">volatile unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilisf_8c.html#a10e91f1922dd5bc7da2e03c3e0e86d75">XIsf_TransferInProgress</a></td></tr>
<tr class="memdesc:a10e91f1922dd5bc7da2e03c3e0e86d75"><td class="mdescLeft">&#160;</td><td class="mdescRight">(((XPAR_XISF_FLASH_FAMILY==INTEL) || \ (XPAR_XISF_FLASH_FAMILY==STM) || \ (XPAR_XISF_FLASH_FAMILY == SST) || \ (XPAR_XISF_FLASH_FAMILY == WINBOND) || \ (XPAR_XISF_FLASH_FAMILY == SPANSION)) &amp;&amp; \ ((!defined(XPAR_XISF_INTERFACE_PSQSPI)) &amp;&amp; \ (!defined(XPAR_XISF_INTERFACE_QSPIPSU)) &amp;&amp; \ (!defined(XPAR_XISF_INTERFACE_OSPIPSV))))  <a href="#a10e91f1922dd5bc7da2e03c3e0e86d75">More...</a><br/></td></tr>
<tr class="separator:a10e91f1922dd5bc7da2e03c3e0e86d75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="afbd9dc9a545164602274a259c1f49dd8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SIXTEENMB&#160;&#160;&#160;0x1000000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sixteen MB. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a10e91f1922dd5bc7da2e03c3e0e86d75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile unsigned int XIsf_TransferInProgress</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>(((XPAR_XISF_FLASH_FAMILY==INTEL) || \ (XPAR_XISF_FLASH_FAMILY==STM) || \ (XPAR_XISF_FLASH_FAMILY == SST) || \ (XPAR_XISF_FLASH_FAMILY == WINBOND) || \ (XPAR_XISF_FLASH_FAMILY == SPANSION)) &amp;&amp; \ ((!defined(XPAR_XISF_INTERFACE_PSQSPI)) &amp;&amp; \ (!defined(XPAR_XISF_INTERFACE_QSPIPSU)) &amp;&amp; \ (!defined(XPAR_XISF_INTERFACE_OSPIPSV)))) </p>
<p>(((XPAR_XISF_FLASH_FAMILY == WINBOND) || \ (XPAR_XISF_FLASH_FAMILY == SPANSION)) &amp;&amp; \ (defined(XPAR_XISF_INTERFACE_PSQSPI) || \ defined(XPAR_XISF_INTERFACE_QSPIPSU))) (((XPAR_XISF_FLASH_FAMILY == WINBOND) || \ (XPAR_XISF_FLASH_FAMILY == SPANSION)) &amp;&amp; \ (defined(XPAR_XISF_INTERFACE_OSPIPSV))) </p>

<p>Referenced by <a class="el" href="group__xilisf__apis.html#ga5e2b2f839618eb2c9db8fbe73472ae79">XIsf_IfaceHandler()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright &copy; 2015 Xilinx Inc. All rights reserved.</li>
  </ul>
</div>
</body>
</html>
